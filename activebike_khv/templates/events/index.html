{% extends 'base.html' %}
{% load static %}
{% load cache %}
{% load thumbnail %}
{% block title %}События - {% endblock %}

{% block content %}

<section class="content-section">
  <h2 class="content-section__title content-section__title_events">Все события</h2>
  {% for event in events %}
    <article class="article">
      <h3 class="article-title"><a href="{% url 'events:event_detail' event.id %}" class="article-title__link">{{ event.title }}</a></h3>
      <div class="article__main">
        <div class="article__left">
          <a href="{% url 'events:event_detail' event.id %}" class="article__image">
            {% thumbnail event.image "300x300" crop="center" upscale=True as im %}
              <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" alt="{{ event.title }}" class="article__image-img">
            {% endthumbnail %}
          </a>
        </div>
        <div class="article__right">
          <div class="article-descr">
            <p class="article-descr__date">{{ event.date_planned|date:"l, d.m.Y" }} г.</p>
            <p class="article-descr__text">{{ event.text_html|safe|truncatechars:300 }}</p>
          </div>
          <a href="{% url 'events:event_detail' event.id %}" class="article__more">Читать дальше →</a>
        </div>
      </div>
      <div class="article-info">
        <div class="article-info__views"><i class="fa fa-eye" aria-hidden="true"></i>{{ event.total_views }}</div>
        <div class="article-info__comments"><i class="fa fa-comment-o" aria-hidden="true"></i>  0</div>
        <div class="article-info__author">{{ event.author|truncatechars:15 }}</div>
        <div class="article-info__edit"><i class="fa fa-pencil" aria-hidden="true"></i> {{ event.date_edit|date:"d.m.Y" }}</div>
      </div>
    </article>
  {% endfor %}
</section>
{% endblock %}
