{% extends 'base.html' %}
{% load static %}
{% load cache %}
{% load thumbnail %}
{% block title %}События{% endblock %}

{% block content %}
<h2 class="events__h2">
  <span class="events__h2_1">События</span>
</h2>

<div class="events__content">
  {% for event in events %}
    <article class="event">
      <h3 class="event__caption"><a href="{% url 'events:event_detail' event.id %}">{{ event.date_planned|date:"d.m.Y" }} - {{ event.caption }}</a></h3>
      <div class="event__main">
        <div class="event__left">
          <div class="event__image">
            {% thumbnail event.image "300x300" crop="center" upscale=True as im %}
              <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" alt="{{ event.caption }}" class="event__image-img">
            {% endthumbnail %}
          </div>
        </div>
        <div class="event__right">
          <div class="event-descr">
            <p class="event-descr__text">{{ event.description|truncatechars:300 }}</p>
          </div>
        </div>
      </div>
      <div class="event__info">
        <div class="event__info-col-1">
          <div class="event__icons">
            <span class="icon-bike"></span>
          </div>
        </div>
        <div class="event__info-col-2">
          <div class="event-author">
            Автор:
            <span class="event-author__value">{{ event.author }}</span>
          </div>
          <div class="event-date-edited">
            Изменено:
            <span class="event-date-edited__value">{{ event.date_edited|date:"d.m.Y" }}</span>
          </div>
        </div>
        <div class="event__info-col-3">
          <div class="event__views">
            Просмотров:
            <span class="event__views-value">20</span>
          </div>
          <div class="event__comments">
            Комментарии (<span class="event__views-value">10</span>)
          </div>
        </div>
        <div class="event__info-col-4">
          <div class="event__date">
            Дата события:
            <span class="event__date-value">{{ event.date_planned|date:"d.m.Y" }}</span>
          </div>
          <div class="event__share">
            <a class="event__date-value" href="">Поделиться</a>
          </div>
        </div>
      </div>
    </article>
  {% endfor %}
</div>
{% endblock %}
